<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>录入</title>
</head>
<body>
<div class="portlet light portlet-fit ">
  <div class="portlet-title">
    <div class="caption">
      <i class="icon-settings font-red"></i>
      <span class="caption-subject font-red sbold uppercase">明细清单</span>
    </div>
  </div>
  <div class="portlet-body">
    <div class="table-toolbar">
      <div class="row">
        <div class="col-md-6">
          <div class="btn-group">
            <button id="detail_editable_1_new" class="btn green">
              新增记录
              <i class="fa fa-plus"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
    <table class="table table-striped table-hover table-bordered" id="detail_editable_1">
      <thead>
      <tr>
        <th>序号</th>
        <th> 费用类型 </th>
        <th> 发生时间 </th>
        <th> 费用金额(元) </th>
        <th> 费用说明 </th>
        <th> 编辑 </th>
        <th> 删除 </th>
      </tr>
      </thead>
      <tbody>
      @*<tr>
        <td> 1 </td>
        <td> 交通费 </td>
        <td> 2018-10-01 </td>
        <td> 2000 </td>
        <td> 备注信息 </td>
        <td>
          <a class="edit" href="javascript:;"> 编辑 </a>
        </td>
        <td>
          <a class="delete" href="javascript:;"> 删除 </a>
        </td>
      </tr>*@
      </tbody>
    </table>
  </div>
</div>


</body>
<script>
  initData();
  function initData(){
    let $table = $('#table');
    let $button = $('#button');
    let $getTableData = $('#getTableData');

    $button.click(function() {
      $table.bootstrapTable('insertRow', {
        index: 0,
        row: {
          id: '',
          name: '',
          price: ''
        }
      });
    });

    $table.bootstrapTable({
      url: '/demoView/getList2',
      toolbar: '#toolbar',
      clickEdit: true,
      showToggle: true,
      pagination: true,       //显示分页条
      showColumns: true,
      showPaginationSwitch: true,     //显示切换分页按钮
      showRefresh: true,      //显示刷新按钮
      //clickToSelect: true,  //点击row选中radio或CheckBox
      columns: [{
        checkbox: true
      }, {
        field: 'name',
        title: 'Item ID'
      }, {
        field: 'name',
        title: 'Item Name'
      }, {
        field: 'name',
        title: 'Item Price'
      }, ],
      /**
       * @param {点击列的 field 名称} field
       * @param {点击列的 value 值} value
       * @param {点击列的整行数据} row
       * @param {td 元素} $element
       */
      onClickCell: function(field, value, row, $element) {
        $element.attr('contenteditable', true);
        $element.blur(function() {
          let index = $element.parent().data('index');
          let tdValue = $element.html();

          saveData(index, field, tdValue);
        })
      }
    });

    $getTableData.click(function() {
      alert(JSON.stringify($table.bootstrapTable('getData')));
    });

    function saveData(index, field, value) {
      $table.bootstrapTable('updateCell', {
        index: index,       //行索引
        field: field,       //列名
        value: value        //cell值
      })
    }

  };


</script>
</html>